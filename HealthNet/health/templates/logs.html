{% extends 'base.html' %}

{% block title %}System Logs{% endblock %}

{% block content %}
    <div>
        <h2 class="text-center">System Stats</h2>
        <br />
        <ul class="list-group">
            <li class="list-group-item">
                <strong>{{ stats.user_count }}</strong> users
                (<strong>{{ stats.patient_count }}</strong> patient{% if stats.patient_count != 1 %}s{% endif %},
                <strong>{{ stats.doctor_count }}</strong> doctor{% if stats.doctor_count != 1 %}s{% endif %},
                <strong>{{ stats.nurse_count }}</strong> nurse{% if stats.nurse_count != 1 %}s{% endif %},
                <strong>{{ stats.admin_count }}</strong> administrator{% if stats.admin_count != 1 %}s{% endif %})
                in your hospital, {{ user.hospital.name }}
            </li>
            <li class="list-group-item">
                <strong>{{ stats.prescription_count }}</strong> active prescriptions.
            </li>
            <li class="list-group-item">
                <strong>{{ stats.appointment_count }}</strong> active appointments.
            </li>
            <li class="list-group-item">
                <strong>{{ stats.conversation_count }}</strong> conversations
                (<strong>{{ stats.message_count }}</strong> total messages.
                Average <strong>{{ stats.average_message_count }}</strong> messages per conversation.)
            </li>
        </ul>
    </div>
    <br />
    <h2 class="text-center">System Logs</h2>
    <br />
    <div class="table-responsive">
        <table class="table table-bordered table-striped">
            <thead></thead>
            <tbody>
            {% for log in logs %}
                <tr>
                    <td class="nowrap">{{ log.action_time }}</td>
                    <td><a href="{% url 'health:medical_information' log.user.pk %}">{{ log.user.get_full_name }}</a> ({{ log.user.email }}) {{ log }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}